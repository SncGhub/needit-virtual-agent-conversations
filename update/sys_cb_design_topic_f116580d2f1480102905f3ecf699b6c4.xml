<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__b516180d48148010078a224b138f5f4b">b116180d2f1480102905f3ecf699b64c</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"a7ffc9c3c0584bb4b533944caf2b4969","triggerType":"request","id":"a7ffc9c3c0584bb4b533944caf2b4969"}],"goals":[{"name":"primary","trigger_id":"a7ffc9c3c0584bb4b533944caf2b4969","nodes":[{"type":"StartGoal","goal_id":"726cacb52d764a15a1e776182435cbdb","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"9a2cec479b564fc08012e9a312553cda","name":"Start"},{"type":"TerminateGoal","goal_id":"726cacb52d764a15a1e776182435cbdb","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"8bb215472239475bbda3e81a76abd8ac","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"4872d9740a8b4457aff234e553e3515a","name":"NeedIt Type","goal_id":"726cacb52d764a15a1e776182435cbdb","variable_id":"e9130d31632d428a931553a566f985ff","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"334137ce219b42aa8b048fb51a6c8db7","name":"Confirm NeedIt Type","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"002a9df5017c40ad88de6c3b506dbb34","name":"NeedIt List","goal_id":"726cacb52d764a15a1e776182435cbdb","variable_id":"28c2987e252f44c491554f70291e0756","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"28c2987e252f44c491554f70291e0756","fields":["priority","short_description","u_when_needed"],"id":"9eac96e3bbfe45ebbcce9ce657c098f9","name":"NeedIt Card","goal_id":"726cacb52d764a15a1e776182435cbdb","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"919239c1240141ef87416957fc059f79","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"f3bf14ab41b84543b050b8fb824fa94e","name":"Search Again","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"cf30f08a1143431a811ce11dd3044cbc","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"56abaa7b493e4ca4b4c0fa277d9ba2f7","name":"Yes"}],"id":"411b89dd47f9413fbc38803d9e4e6b4d","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"InputPrompt","variable_id":"9a6f1e0a4efb4c619abcaea2e656999a","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"2e94a9c65fdd4bbcb5af1d167e9d7a4b","name":"New When Needed Date","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"28c2987e252f44c491554f70291e0756","id":"972e0e841b2848ca8ea956492b422c0d","name":"Change When Needed Date","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"28c2987e252f44c491554f70291e0756","fields":["u_when_needed"],"id":"03ec6b08773847e19d7b28b625655bcf","name":"Updated NeedIt","goal_id":"726cacb52d764a15a1e776182435cbdb","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n})()","id":"a4c0f014bc0d49b4a62e50d483b8b806","name":"Update search_count","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"Decision","name":"Search_count value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n})()"},"id":"a7f077c99f314ea3ad2e1261b814c2df","name":"Less than 3"},{"type":"Branch","label":"3 or more","expression":{"type":"Applicability","mode":"query","value":""},"id":"cec32de40f794ef1a445314bf05b6d5f","name":"3 or more"}],"id":"0e7b2c6ed0654c5baf3844ff8ac8cb29","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n})()"},"id":"69f94acdae454f3ca509155b8c8c732a","name":"Quota Reached","goal_id":"726cacb52d764a15a1e776182435cbdb"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n})()","id":"c5cc1e4141ee42a2a5c4733067789710","name":"Transfer to Agent","goal_id":"726cacb52d764a15a1e776182435cbdb","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n})()"}}],"edges":[{"type":"Edge","source_node_id":"9eac96e3bbfe45ebbcce9ce657c098f9","target_node_id":"2e94a9c65fdd4bbcb5af1d167e9d7a4b","id":"6aa71e340d7c4ef98dea214599e122df"},{"type":"Edge","source_node_id":"9a2cec479b564fc08012e9a312553cda","target_node_id":"4872d9740a8b4457aff234e553e3515a","id":"8a15120d9fc143d38822c6e7ae2d5452"},{"type":"Edge","source_node_id":"4872d9740a8b4457aff234e553e3515a","target_node_id":"334137ce219b42aa8b048fb51a6c8db7","id":"3e4c7541718849248def2db0f8fa9f23"},{"type":"Edge","source_node_id":"334137ce219b42aa8b048fb51a6c8db7","target_node_id":"002a9df5017c40ad88de6c3b506dbb34","id":"7f84918c9dee474cb638dbe595c0c7fd"},{"type":"Edge","source_node_id":"002a9df5017c40ad88de6c3b506dbb34","target_node_id":"9eac96e3bbfe45ebbcce9ce657c098f9","id":"56b4ac3bdded4c558a97becc1d6c29cd"},{"type":"Edge","source_node_id":"f3bf14ab41b84543b050b8fb824fa94e","target_node_id":"411b89dd47f9413fbc38803d9e4e6b4d","id":"a9142e0a0ddb48efbb5718ceae274bed"},{"type":"Edge","source_node_id":"411b89dd47f9413fbc38803d9e4e6b4d","target_node_id":"8bb215472239475bbda3e81a76abd8ac","branch_id":"cf30f08a1143431a811ce11dd3044cbc","id":"615991be39df40028cf4a4ff53369f3f","name":"cf30f08a1143431a811ce11dd3044cbc"},{"type":"Edge","source_node_id":"2e94a9c65fdd4bbcb5af1d167e9d7a4b","target_node_id":"972e0e841b2848ca8ea956492b422c0d","id":"3f4e5f8ddccd449e8ee500440b4fa719"},{"type":"Edge","source_node_id":"972e0e841b2848ca8ea956492b422c0d","target_node_id":"03ec6b08773847e19d7b28b625655bcf","id":"782d698d627d47a9a56897d0132b6ad1"},{"type":"Edge","source_node_id":"03ec6b08773847e19d7b28b625655bcf","target_node_id":"f3bf14ab41b84543b050b8fb824fa94e","id":"7b29e9a819e2495aac542a5418b0e923"},{"type":"Edge","source_node_id":"411b89dd47f9413fbc38803d9e4e6b4d","target_node_id":"a4c0f014bc0d49b4a62e50d483b8b806","branch_id":"56abaa7b493e4ca4b4c0fa277d9ba2f7","id":"3a9660a069de434dbf99adfcd8633f55","name":"56abaa7b493e4ca4b4c0fa277d9ba2f7"},{"type":"Edge","source_node_id":"a4c0f014bc0d49b4a62e50d483b8b806","target_node_id":"0e7b2c6ed0654c5baf3844ff8ac8cb29","id":"436d5429b69c45dc9d5182893f16c5ea"},{"type":"Edge","source_node_id":"0e7b2c6ed0654c5baf3844ff8ac8cb29","target_node_id":"4872d9740a8b4457aff234e553e3515a","branch_id":"a7f077c99f314ea3ad2e1261b814c2df","id":"e7f382f8350844daa8addc10dca9004e","name":"a7f077c99f314ea3ad2e1261b814c2df"},{"type":"Edge","source_node_id":"0e7b2c6ed0654c5baf3844ff8ac8cb29","target_node_id":"69f94acdae454f3ca509155b8c8c732a","branch_id":"cec32de40f794ef1a445314bf05b6d5f","id":"a6c3d4587ff045d199ba8d375fa42b22","name":"cec32de40f794ef1a445314bf05b6d5f"},{"type":"Edge","source_node_id":"69f94acdae454f3ca509155b8c8c732a","target_node_id":"c5cc1e4141ee42a2a5c4733067789710","id":"f86ffc63ec4441f884a42abc95df042d"},{"type":"Edge","source_node_id":"c5cc1e4141ee42a2a5c4733067789710","target_node_id":"8bb215472239475bbda3e81a76abd8ac","id":"bbde9900a3e948c2bdab128793ed2a1a"}],"id":"726cacb52d764a15a1e776182435cbdb"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"248a9ce4bf5247e59e54d025b9fc7ff0"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"e9130d31632d428a931553a566f985ff","name":"needit_type"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Reference","table":"x_58872_needit_needit","id":"28c2987e252f44c491554f70291e0756","name":"needit_list"},{"type":"True/False","id":"919239c1240141ef87416957fc059f79","name":"search_again"},{"type":"Date/Time","mode":"date","id":"9a6f1e0a4efb4c619abcaea2e656999a","name":"new_when_needed_date"},{"type":"Reference","table":"x_58872_needit_needit","id":"91fddcd002db4c5db33d8df3b61e45e8","name":"change_when_needed_date"}],"roles":[],"scope":"4d1206bc2f5c40102905f3ecf699b643","id":"8bfc9a782fdc40102905f3ecf699b6dd","name":"_PRVW__b516180d48148010078a224b138f5f4b","key_phrases":["Update NeedIt Records","NeedIt Request"]}</design_definition>
        <design_topic_id>8bfc9a782fdc40102905f3ecf699b6dd</design_topic_id>
        <name>_PRVW__b516180d48148010078a224b138f5f4b</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-10-03 01:24:36</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>f116580d2f1480102905f3ecf699b6c4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_378698_needit_vi">4d1206bc2f5c40102905f3ecf699b643</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">4d1206bc2f5c40102905f3ecf699b643</sys_scope>
        <sys_update_name>sys_cb_design_topic_f116580d2f1480102905f3ecf699b6c4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-10-03 01:24:36</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
